(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(1712)}])},1712:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return O},default:function(){return V}});var n=r(7568),o=r(797),i=r(4051),s=r.n(i),c=r(5893),a=r(3238),l=r(8527),u=r(5193),h=r(7822),d=r(6486),f=r(5675),x=r.n(f),p=r(7294),g=r(3188),m={src:"/zokrates-nextjs-demo//_next/static/media/conclusion.c15348e4.png",height:284,width:425,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAb0lEQVR42kXLOw5AQBSFYbu0FrXKNixAL0JEQSfRoVSMRyHxiDuMO0dmGt3J+fI7WmsA6pHMZhFJwHwOgJc5K6p9W5+hqMsUVgzQRaEXiDpH4y5tYoENsJSp7+/jtK0ij6O/UOcxdL0GLrrFOFvAByygbo9RkrloAAAAAElFTkSuQmCC"},v=r(1799),j=r(9396),k=r(9534),y=r(9116),b=function(e){var t=e.values,r=e.onValueChange,n=(0,k.Z)(e,["values","onValueChange"]);return(0,c.jsx)(l.gC,(0,j.Z)((0,v.Z)({w:"200px"},n),{children:t.map((function(e,t){return(0,c.jsx)(l.Ug,{children:e.map((function(e,n){return(0,c.jsx)(y.II,{type:"number",size:"lg",fontWeight:"bold",textAlign:"center",value:null!==e&&void 0!==e?e:"",onChange:function(e){return r(t,n,e.currentTarget.value)},max:100,required:!0},"".concat(t,"-").concat(n))}))},t)}))}))},w=(0,r(1604).m$)(l.W2,{baseStyle:{bg:"gray.50",color:"black",_dark:{bg:"gray.900",color:"white"},transition:"all 0.15s ease-out"}}),A=r(2684),S=r(7375),C=r(1929),z=function(e){var t=e.source,r=(0,A.Sx)({base:"full",lg:"xl"}),n=(0,S.qY)(),o=n.isOpen,i=n.onOpen,s=n.onClose;return(0,c.jsxs)(l.xu,{children:[(0,c.jsx)(u.zx,{onClick:i,children:"Show code"}),(0,c.jsxs)(C.u_,{size:r,isCentered:!0,onClose:s,isOpen:o,motionPreset:"scale",children:[(0,c.jsx)(C.ZA,{}),(0,c.jsxs)(C.hz,{children:[(0,c.jsx)(C.xB,{children:"Source Code"}),(0,c.jsx)(C.ol,{}),(0,c.jsx)(C.fe,{children:(0,c.jsx)(l.EK,{display:"flex",whiteSpace:"pre",overflow:"scroll",textAlign:"left",children:t})}),(0,c.jsx)(C.mz,{children:(0,c.jsx)(u.zx,{mr:3,onClick:s,children:"Close"})})]})]})]})},_=r(1876).Buffer,E=r(2325),P=[["31","73","7"],["13","37","61"],["67","1","43"]],K=[["","","7"],["13","37",""],["","",""]],O=!0,V=function(e){var t=(0,p.useState)(null),r=t[0],i=t[1],f=(0,p.useState)(!1),v=f[0],j=f[1],k=(0,p.useState)(null),y=k[0],A=k[1];(0,p.useEffect)((function(){var e=function(){var e=(0,n.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.j)();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var S=(0,p.useState)(K),C=S[0],O=S[1],V=(0,a.pm)(),W=(0,h.h4)({initialStep:0}),Z=W.nextStep,N=W.reset,T=W.activeStep;return(0,c.jsxs)(w,{p:4,justifyContent:"center",bg:"white",maxWidth:"48rem",children:[(0,c.jsxs)(h.Rg,{activeStep:T,orientation:"vertical",children:[(0,c.jsx)(h.h8,{label:"Peggy (the prover)",py:2,children:(0,c.jsx)("form",{onSubmit:function(t){return function(t){t.preventDefault(),j(!0),A(null),setTimeout((0,n.Z)(s().mark((function t(){var n,i,c,a,l,u,h;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=Uint8Array.from(_.from(e.program,"hex")),i=C.flat(),c=r.computeWitness(n,(0,o.Z)(i).concat(["111"]),{snarkjs:!0}),a=Uint8Array.from(_.from(e.provingKey,"hex")),l=r.generateProof(n,c.witness,a),u=Uint8Array.from(_.from(e.snarkjs.zkey,"hex")),t.next=9,E.groth16.prove(u,c.snarkjs.witness);case 9:h=t.sent,A({zokratesProof:l,snarkjsProof:h}),V({title:"Yay!",description:"Your solution is correct :)",position:"top",status:"success",duration:5e3,isClosable:!0}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.error(t.t0),V({title:"Whoops!",description:"Your solution seems to be incorrect :(",position:"top",status:"error",duration:5e3,isClosable:!0});case 18:j(!1);case 19:case"end":return t.stop()}}),t,null,[[0,14]])}))),100)}(t)},children:(0,c.jsxs)(l.Kq,{spacing:"1.5rem",width:"100%",alignItems:"center",p:1,children:[(0,c.jsxs)(l.kC,{direction:"column",alignItems:"center",children:[(0,c.jsx)(b,{values:C,onValueChange:function(e,t,r){return function(e,t,r){var n=C.slice();n[e][t]=r,O(n)}(e,t,r)},marginBottom:2}),(0,c.jsx)(l.xv,{color:"gray.500",fontSize:"sm",onClick:function(){return O((0,d.cloneDeep)(P))},cursor:"pointer",children:"Show solution"})]}),(0,c.jsxs)(l.xv,{color:"text",fontSize:"lg",children:["This is a"," ",(0,c.jsx)(l.xv,{as:"span",fontWeight:"bold",children:"Magic Square"}),". This means that the numbers add up to the same total in every direction. Every row, column and diagonal should add up to"," ",(0,c.jsx)(l.EK,{children:"111"}),". Fill the missing fields and prove to the verifier that you know the solution without revealing the values!"]}),(0,c.jsxs)(l.kC,{gap:2,flexWrap:"wrap",children:[(0,c.jsx)(u.zx,{isLoading:v,loadingText:"Proving...",colorScheme:"teal",variant:"solid",type:"submit",children:"Generate a proof"}),(0,c.jsx)(z,{source:e.source})]}),y&&(0,c.jsxs)(l.kC,{maxW:"100%",direction:"column",children:[(0,c.jsx)(l.EK,{whiteSpace:"pre",overflow:"scroll",textAlign:"left",p:2,mb:2,children:JSON.stringify(y.zokratesProof,null,2)}),(0,c.jsx)(u.zx,{variant:"solid",type:"button",colorScheme:"teal",onClick:Z,children:"Next step"})]})]})})},"prover"),(0,c.jsx)(h.h8,{label:"Victor (the verifier)",py:2,children:(0,c.jsxs)(l.Kq,{spacing:"1.5rem",width:"100%",maxWidth:"48rem",alignItems:"center",p:"1rem",children:[(0,c.jsx)(x(),{src:m,alt:"conclusion"}),(0,c.jsx)(l.xv,{color:"text",fontSize:"lg",children:"Did Peggy run the computation successfully? Does Peggy know the right solution? Good questions, let's find out."}),(0,c.jsxs)(l.kC,{gap:2,children:[(0,c.jsx)(u.zx,{isLoading:v,loadingText:"Verifying...",colorScheme:"teal",variant:"solid",type:"button",onClick:function(){j(!0),setTimeout((0,n.Z)(s().mark((function t(){var n,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=y.zokratesProof,o=y.snarkjsProof,t.t0=r.verify(e.verificationKey,n),!t.t0){t.next=7;break}return t.next=6,E.groth16.verify(e.snarkjs.vkey,o.publicSignals,o.proof);case 6:t.t0=t.sent;case 7:if(!t.t0){t.next=11;break}V({title:"Yes!",description:"Victor successfully verified Peggy's proof :)",position:"top",status:"success",duration:5e3,isClosable:!0}),t.next=12;break;case 11:throw new Error("Verification failed :(");case 12:t.next=18;break;case 14:t.prev=14,t.t1=t.catch(0),console.error(t.t1),V({title:"Whoops!",description:t.t1.toString(),position:"top",status:"error",duration:5e3,isClosable:!0});case 18:j(!1);case 19:case"end":return t.stop()}}),t,null,[[0,14]])}))),100)},children:"Verify"}),(0,c.jsx)(u.zx,{variant:"solid",type:"button",onClick:function(){O(K),A(null),j(!1),N()},children:"Reset"})]})]})},"verifier")]}),(0,c.jsxs)(l.kC,{as:"footer",py:"8rem",alignItems:"center",direction:"column",children:[(0,c.jsxs)(l.xv,{color:"gray.500",children:["Check the source code of this demo"," ",(0,c.jsx)(l.rU,{color:"teal",href:"https://github.com/dark64/zokrates-nextjs-demo",children:"here"}),"."]}),(0,c.jsxs)(l.xv,{color:"gray.500",children:["Made by"," ",(0,c.jsx)(l.rU,{color:"teal",href:"https://github.com/Zokrates/ZoKrates",children:"ZoKrates Team"})]})]})]})}},7790:function(){},5979:function(){},2825:function(){}},function(e){e.O(0,[792,808,714,662,158,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);